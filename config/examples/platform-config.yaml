# SPDX-License-Identifier: EUPL-1.2
# Videowall Platform Configuration
# Validated against: config/schema.json
# Delivered via: Kubernetes ConfigMap or signed offline bundle

platform:
  version: "1.0.0"
  max_concurrent_streams: 64
  codec_policy:
    tiles: h264
    mosaics: hevc
  latency_classes:
    interactive_max_ms: 500
    broadcast_max_ms: 6000

walls:
  - id: wall-alpha
    type: tiles
    classification: confidential
    latency_class: interactive
    grid:
      rows: 6
      cols: 4
    resolution: 1920x1080
    tags:
      mission: alpha
      room: ops-center

  - id: wall-bravo
    type: tiles
    classification: secret
    latency_class: interactive
    grid:
      rows: 6
      cols: 4
    resolution: 1920x1080
    tags:
      mission: bravo
      room: intel-center

  - id: wall-charlie
    type: bigscreen
    classification: confidential
    latency_class: broadcast
    screens: 2
    resolution: 3840x2160
    tags:
      mission: alpha
      room: exec-briefing

  - id: wall-delta
    type: bigscreen
    classification: unclassified
    latency_class: broadcast
    screens: 2
    resolution: 3840x2160
    tags:
      mission: training
      room: training-center

sources:
  - id: vdi-01
    type: webrtc
    codec: h264
    resolution: 1920x1080
    bitrate_kbps: 6000
    tags:
      classification: confidential
      mission: alpha

  - id: vdi-02
    type: webrtc
    codec: h264
    resolution: 1920x1080
    bitrate_kbps: 6000
    tags:
      classification: confidential
      mission: alpha

  - id: hdmi-01
    type: srt
    endpoint: "srt://10.10.10.20:9000"
    codec: h264
    bitrate_kbps: 8000
    tags:
      classification: confidential
      mission: alpha

  - id: hdmi-02
    type: rtsp
    endpoint: "rtsp://10.10.10.21:554/stream1"
    codec: h264
    bitrate_kbps: 8000
    tags:
      classification: restricted
      mission: bravo

  - id: hdmi-03
    type: srt
    endpoint: "srt://10.10.10.22:9000"
    codec: h264
    resolution: 3840x2160
    bitrate_kbps: 15000
    tags:
      classification: unclassified
      mission: training

policy:
  taxonomy:
    classifications: ["unclassified", "restricted", "confidential", "secret"]
    missions: ["alpha", "bravo", "training"]

  rules:
    - id: rule-clearance-match
      effect: allow
      description: "Operator clearance tags must be a superset of source classification tags."
      when:
        source_tags_subset_of_operator_tags: true

    - id: rule-default-deny
      effect: deny
      description: "Default deny â€” no rule matched."
      when:
        always: true

  allow_list: []
