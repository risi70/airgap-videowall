replicaCount: 2

image:
  repository: janus-gateway/janus-gateway
  tag: "1.2.4"
  pullPolicy: IfNotPresent

service:
  type: LoadBalancer
  metallbAddressPool: "default"
  httpPort: 8088
  wsPort: 8188
  rtpPortStart: 20000
  rtpPortEnd: 20200

janus:
  nat:
    iceLiteEnabled: true
  auth:
    tokenAuthEnabled: true
    existingSecret: "janus-token-secret"
    tokenKey: "JANUS_TOKEN"
  media:
    maxNackQueue: 300
    noMediaTimer: 5
    slowlinkThreshold: 4

videoroom:
  # Room IDs are dynamically created from platform config (one per tile-wall).
  # The defaultRoomId is only used as a fallback when vw-config is unavailable.
  defaultRoomId: 0
  private: true
  maxPublishers: 64             # Derived from platform.max_concurrent_streams
  bitrate: 8000000
  videocodec: "h264"            # Derived from platform.codec_policy.tiles

networkPolicy:
  enabled: true
  # allow ingress on 8088/8188 from mgmt-api and display zone pods (and optionally others)
  fromMgmtApiSelector:
    namespaceSelector:
      matchLabels:
        kubernetes.io/metadata.name: vw-control  # Override via controlPlaneNamespace
    podSelector:
      matchLabels:
        app.kubernetes.io/name: vw-mgmt-api

# Vault Agent sidecar injection
vault:
  enabled: true
  role: ""            # Override Vault K8s auth role (default: "sfu")
  pkiPath: "pki_int/issue/server-cert"

# Cross-namespace references â€” override when control plane is in a different namespace
controlPlaneNamespace: "vw-control"
