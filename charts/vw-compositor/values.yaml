replicaCount: 1

image:
  repository: vw-compositor
  tag: "0.1.0"
  pullPolicy: IfNotPresent

service:
  type: LoadBalancer
  port: 8005
  metallbAddressPool: "default"

resources:
  limits:
    nvidia.com/gpu: "1"
  requests:
    cpu: "2"
    memory: "4Gi"

persistence:
  size: "10Gi"

env:
  VW_POLICY_SERVICE_URL: ""  # Auto-resolved; override for cross-namespace: http://vw-policy.<ns>.svc.cluster.local:8002

nodeSelector:
  nvidia.com/gpu.present: "true"
tolerations: []
affinity: {}

networkPolicy:
  enabled: true
  fromMgmtApiSelector:
    namespaceSelector:
      matchLabels:
        kubernetes.io/metadata.name: vw-control  # Override via controlPlaneNamespace
    podSelector:
      matchLabels:
        app.kubernetes.io/name: vw-mgmt-api
  toPolicySelector:
    namespaceSelector:
      matchLabels:
        kubernetes.io/metadata.name: vw-control  # Override via controlPlaneNamespace
    podSelector:
      matchLabels:
        app.kubernetes.io/name: vw-policy
  toSourceCidrs: []

# Vault Agent sidecar injection
vault:
  enabled: true
  role: ""            # Override Vault K8s auth role (default: "compositor")
  pkiPath: "pki_int/issue/server-cert"

# Cross-namespace references
controlPlaneNamespace: "vw-control"
